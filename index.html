<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>å°éŠæˆ² â€” ç¦ï¼†æ½˜</title>
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#f4fbf8; --muted:#9aa7b2; --text:#e6eef3;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Noto Sans TC", Arial, sans-serif;
    background: linear-gradient(180deg,#071021 0%, #0f1724 100%);
    color:var(--text); display:flex; align-items:center; justify-content:center; min-height:100vh;
  }
  .container{ width:96%; max-width:900px; padding:26px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,0.6); }
  header{display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px}
  h1{margin:0; font-size:20px; letter-spacing:0.4px}
  .meta{display:flex; gap:8px; align-items:center}
  .stat{background:rgba(255,255,255,0.03); padding:6px 10px; border-radius:8px; font-size:14px; color:var(--muted)}
  main{display:flex; gap:18px}
  .left{flex:1; min-width:220px}
  .scene{background:var(--card); padding:18px; border-radius:10px; min-height:220px; line-height:1.8}
  .choices{margin-top:12px; display:flex; flex-direction:column; gap:10px}
  button.choice{background:transparent; border:1px solid rgba(255,255,255,0.06); padding:10px 12px; border-radius:8px; color:var(--text); cursor:pointer; text-align:left}
  button.choice:hover{border-color:var(--accent); transform:translateY(-3px)}
  .right{width:260px}
  .panel{background:var(--card); padding:12px; border-radius:10px; margin-bottom:12px}
  .panel h3{margin:0 0 8px 0; font-size:14px}
  .inv-list{display:flex; flex-wrap:wrap; gap:8px}
  .inv-item{background:rgba(255,255,255,0.03); padding:6px 8px; border-radius:8px; font-size:13px}
  .controls{display:flex; gap:8px; margin-top:8px}
  .btn{background:var(--accent); color:#042029; border:none; padding:8px 10px; border-radius:8px; cursor:pointer}
  .muted{color:var(--muted); font-size:13px}
  footer{margin-top:12px; color:var(--muted); font-size:13px; text-align:center}
  @media (max-width:720px){ main{flex-direction:column} .right{width:100%} }
</style>
</head>
<body>
<div class="container" role="application" aria-label="æ–‡å­—å†’éšªéŠæˆ²">
  <header>
    <div>
      <h1>å°éŠæˆ² â€” ç¦ï¼†æ½˜</h1>
      <div class="muted">2025 summer memoirs</div>
    </div>
    <div class="meta">
      <div class="stat" id="stat-affection">å¥½æ„Ÿåº¦: 0</div>
      <div class="stat" id="stat-scene">å ´æ™¯: first meet</div>
    </div>
  </header>

  <main>
    <div class="left">
      <div class="scene" id="scene-text" tabindex="0">
        <!-- åŠ‡æœ¬æ–‡å­—æœƒåœ¨æ­¤ -->
      </div>

      <div class="choices" id="choices">
        <!-- é¸é …æŒ‰éˆ•æœƒåœ¨æ­¤ -->
      </div>

      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
        <button class="btn" id="saveBtn">save</button>
        <button class="btn" id="loadBtn">load</button>
        <button class="btn" id="restartBtn">restart</button>
      </div>
    </div>

    <aside class="right">
      <div class="panel">
        <h3>è§’è‰²</h3>
        <div class="muted"> ğŸ¦‘ / ğŸ¥ </div>
        <div style="margin-top:8px; display:flex; gap:8px;">
          <input id="playerNameInput" placeholder="ä½ çš„åå­—" style="flex:1; padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--text)">
          <input id="boyfriendNameInput" placeholder="å°æ–¹åå­—" style="flex:1; padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--text)">
        </div>
        <div class="muted" style="margin-top:8px">æ”¹åå¾Œè«‹æŒ‰ä¸‹ã€Œrestartã€</div>
        <div style="margin-top:8px">
          <button class="btn" id="applyNames">å¥—ç”¨åç¨±</button>
        </div>
      </div>

      <div class="panel">
        <h3>æ”¶ç©«</h3>
        <div class="inv-list" id="inventory"></div>
      </div>

      <div class="panel">
        <h3>èªªæ˜</h3>
        <div class="muted">å¥½æ„Ÿåº¦åˆ°é”100å³å¯é–‹å•Ÿå¡ç‰‡ã€‚</div>
      </div>
    </aside>
  </main>

  <footer id="footer">our first summer</footer>
</div>

<script>
/*
  æ–‡å­—å†’éšªç¯„ä¾‹å¼•æ“ï¼ˆæ˜“æ–¼æ“´å……ï¼‰
  - scenes: å ´æ™¯æ¸…å–®ï¼Œæ¯å€‹å ´æ™¯åŒ…å« id, text, choicesï¼ˆé™£åˆ—ï¼‰
  - choice: { text, target, affection (å¯æ­£å¯è² ), giveItem, requireItem }
  - å¯ä»¥åœ¨ scenes é™£åˆ—ä¸­åŠ å…¥ä»»æ„å ´æ™¯èˆ‡åˆ†æ”¯
*/

/* ===== åˆå§‹è¨­å®šï¼ˆå¯æ”¹ï¼‰ ===== */
let playerName = "ç¦ç¦";        // å¯é è¨­æˆ Alani
let boyfriendName = "æ½˜æ½˜";     // å¯æ”¹ç‚ºç”·å‹åå­—

/* ===== éŠæˆ²ç‹€æ…‹ ===== */
const state = {
  current: "start",
  affection: 0,   // 0-100
  inventory: []
};

/* ===== å ´æ™¯å®šç¾©ï¼ˆè«‹åœ¨é€™è£¡å®¢è£½åŒ–åŠ‡æƒ…ï¼‰ =====
   ç¯„ä¾‹å ´æ™¯ç¤ºç¯„å¤šç¨®åˆ†æ”¯ã€é“å…·éœ€æ±‚èˆ‡çµå±€
*/
const scenes = [
  {
    id: "start",
    title: "ç›¸è­˜",
    text: () => `2025/6/6å‡Œæ™¨ï¼Œå‰›æ”¾æš‘å‡ç„¡èŠçš„ç¦ç¦ä¸çŸ¥é“å¹¹å˜›å¥½ï¼Œæ–¼æ˜¯èººåœ¨åºŠä¸Šç™¼äº†ä¸€ç¯‡æ–‡ã€‚
    æ°å¥½æ½˜æ½˜å»äº†åº•ä¸‹ç•™è¨€ã€‚ç¦ç¦å’Œæ½˜æ½˜çš„ç·£ä»½å°±æ­¤å±•é–‹ã€‚\n\nå¾—åˆ°æ½˜æ½˜çš„Lineå¾Œç¦ç¦æ±ºå®š...`,
    choices: [
      { text: "ä¸»å‹•æ‰“æ‹›å‘¼", target: "ç¬¬äºŒå¤©", affection: +5 },
      { text: "ç­‰æ½˜æ½˜å‚³è¨Šæ¯", target: "no_result", affection: 0 },
      { text: "åŠ å®Œé¦¬ä¸Šå°é–", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "ç¬¬äºŒå¤©",
    text: () => `ç¦ç¦å¾ˆæƒ³æ‰¾æ½˜æ½˜èªªè©±ä½†æ˜¯ä¸çŸ¥é“è©²æ‰¾ä»€éº¼è©±é¡Œï¼Œæ–¼æ˜¯å‘Šè¨´äº†å¥¹è‡ªå·±çš„mbtiæ˜¯infjè·Ÿæ½˜æ½˜çš„enfpå¾ˆåˆã€‚
    æ½˜æ½˜è©²æ€éº¼å›è¦†å‘¢ï¼Ÿ`,
    choices: [
      { text: "çœŸå‡ï¼Œçœ‹ä¾†æˆ‘å¾—å¥½å¥½ä¾†ç ”ç©¶infjäº†", target: "ç¶“éå¾¹å¤œçš„èŠå¤©ï¼Œç¦ç¦å¥½åƒæœ‰é»æšˆäº†", affection: +5 },
      { text: "å‡è£æ²’çœ‹åˆ°ï¼Œä¸ç†æœƒç¦ç¦", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "ç¶“éå¾¹å¤œçš„èŠå¤©ï¼Œç¦ç¦å¥½åƒæœ‰é»æšˆäº†",
    text: () => `é‚£å¤©ï¼Œå› ç‚ºç¨®ç¨®åŸå› ç¦ç¦å¿ƒæƒ…ä¸å¥½ï¼Œå¸Œæœ›æ½˜æ½˜èƒ½å®‰æ…°ä»–ï¼Œä½†æ½˜æ½˜å¾ˆå†·æ·¡ï¼Œè®“ç¦ç¦å¾ˆé›£éï¼Œæ½˜æ½˜è¬›å‡ºäº†ä»–çš„çœŸå¯¦æƒ³æ³•æƒ³è¦å…ˆç·©ç·©ã€‚
    å´©æ½°åˆ°å‡Œæ™¨å››é»çš„ç¦ç¦è©²æ€éº¼åšå‘¢ï¼Ÿ
    
    
    ï¼ˆé‚„è¢«å¥¹çš„æœ‹å‹ç‘„ç‘„ä¸€ç›´ç½µï¼‰`,
    choices: [
      { text: "è·Ÿæ½˜æ½˜è§£é‡‹ç‚ºä»€éº¼ä¸€æ•´å¤©éƒ½æ²’æœ‰å›ä»–è¨Šæ¯ï¼Œä¸¦ä¸”é“æ­‰", target: "ç¬¬ä¸€æ¬¡è¦‹é¢", giveItem: "æ„Ÿæƒ…è¿…é€Ÿå‡æº«", affection: +5 },
        { text: "å·²è®€ä¸å›ï¼Œç›´æ¥å°é–æ–·è¯", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "ç¬¬ä¸€æ¬¡è¦‹é¢",
    text: () => `å–®ç¨å’Œæ½˜æ½˜åœ¨é›»æ¢¯è£¡çš„ç¦ç¦æ„Ÿåˆ°éå¸¸å°·å°¬ï¼Œ${boyfriendName}é€™æ™‚åšäº†ä»€éº¼å‘¢ï¼Ÿ`,
    choices: [
      { text: "ä¸€ç›´ç¬‘ï¼Œç¦ç¦å«ä»–ä¸è¦ç¬‘ï¼", target: "çœ‹é›»å½±é€”ä¸­æ½˜æ½˜å·ç‰½ç¦ç¦çš„æ‰‹", affection: +5 },
      { text: "ä½ çš„é ­é«®å¥½ç´…ï¼Œå¥½åƒæ¸£å¥³å–”", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "çœ‹é›»å½±é€”ä¸­æ½˜æ½˜å·ç‰½ç¦ç¦çš„æ‰‹",
    text: () => `å‰ä¸€æ™šï¼Œå…©äººåœ¨è¨Šæ¯è£¡è¨è«–è¦ä¸è¦ç‰½æ‰‹ã€‚${boyfriendName}èªªçœ‹ç•¶æ™‚çš„æ°£æ°›å›‰ã€‚`,
    choices: [
      { text: "æ½˜æ½˜å‹‡æ•¢ä¸”ç¾æ¾€åœ°ç‰½èµ·ç¦ç¦çš„æ‰‹", target: "6/15~6/21å…©å€‹äººéƒ½åœ¨æ—¥æœ¬", giveItem: "ç¡¬ç¡¬çš„å°æ½˜æ½˜", affection: +5 },
      { text: "æ‰ä¸ç‰½ï¼Œè¦ºå¾—å¤ªå¿«äº†ï¼Œä¸èƒ½è®“ç¦ç¦å¾—é€", target: "no_result", affection: -5 },
    ]
  },
  {
    id: "6/15~6/21å…©å€‹äººéƒ½åœ¨æ—¥æœ¬",
    text: () => `ç¦ç¦å’Œæ½˜æ½˜æ°å¥½éƒ½åœ¨æ—¥æœ¬ã€‚
    å…©äººåªéš”äº†å°åŒ—åˆ°å°ä¸­çš„è·é›¢ã€‚æ—…è¡Œä¸­çš„æ½˜æ½˜é€™æ™‚è©²æ€éº¼åšå‘¢ï¼Ÿ`,
    choices: [
      { text: "æ¯å¤©åˆ†äº«ä»Šå¤©å»ç©äº†ä»€éº¼çµ¦ç¦ç¦", target: "ç¬¬äºŒæ¬¡è¦‹é¢ï¼šå¤±ç´„çš„ä¹ä»½" , giveItem: "ç¬¬ä¸€æ¬¡èªªæ„›ä½ ", affection: +5 },
      { text: "ä¸è¯çµ¡ï¼Œå°ˆå¿ƒç©è‡ªå·±çš„", target: "no_result", affection: -5 },
    ]
  },
  {
    id: "ç¬¬äºŒæ¬¡è¦‹é¢ï¼šå¤±ç´„çš„ä¹ä»½",
    text: () => `ç¦ç¦å’Œæ½˜æ½˜å¸¶è‘—çµ¦å½¼æ­¤å¾æ—¥æœ¬å¸¶å›ä¾†çš„ç´€å¿µå“å›å®¿èˆæ”¾ï¼Œæ®Šä¸çŸ¥ä¸€ä¸å°å¿ƒå°±åœ¨å®¿èˆå¾æ—©ä¸Šåé»èŠåˆ°æ™šä¸Šåé»ã€‚
    åœ¨é€™åäºŒå°æ™‚è£¡ä»–å€‘å…©å€‹å¾å¤©èŠåˆ°åœ°ï¼Œå¾åŒ—èŠåˆ°å—ï¼Œå¾è¥¿èŠåˆ°æ±ï¼ŒèŠç›¡äººç”Ÿå¤§å°äº‹ã€‚
    é€™12å€‹å°æ™‚æ€éº¼å°±åƒæ˜¯12ç§’å‘¢ï¼Ÿ

    ä½†åœ¨é€™ç•¶ä¸­æ½˜æ½˜å¾—çŸ¥ç¦ç¦æ˜¯ä¸€å€‹å¾ˆå¸¸ä¸é–‹å¿ƒçš„äººï¼Œæ½˜æ½˜è©²æ€éº¼åšå‘¢ï¼Ÿ`,
    choices: [
      { text: "å®‰æ…°ä»–ï¼Œé™ªåœ¨å¥¹èº«é‚Šä¸¦é¼“å‹µå¥¹", target: "åæ–¹å‘åˆ—è»Š", affection: +5, giveItem: "æ½˜æ½˜ç™½ç™½çš„å…§è¤²" },
      { text: "è®“å¥¹è‡ªå·±æ¶ˆåŒ–ï¼Œä¸ç®¡å¥¹", target: "no_result", affection: -5
      }
    ]
  },
  {
    id: "åæ–¹å‘åˆ—è»Š",
    text: () => `ç¬¬ä¸‰æ¬¡è¦‹é¢ï¼Œæ½˜æ½˜å»ç¦ç¦å®¶è£¡ï¼ˆç¦å¤§è†½...ï¼‰ï¼Œç¦ç¦ç…®äº†æ°´é¤ƒçµ¦æ½˜æ½˜åƒã€‚
    åƒé£½å¾Œï¼Œæ½˜æ½˜å’Œç¦ç¦è·‘å»æ•…å®®ç©ï¼Œçµæœæ­éŒ¯äº†æ–¹å‘...è·‘åˆ°äº†æ·±å±±è£¡ï¼ŒæŠµé”æ•…å®®åªå‰©ä¸‹åŠå°æ™‚èƒ½åƒè¨ªæ–‡ç‰©ï¼Œå…©äººåƒéº»é›€èˆ¬å±æ¸£å€‹ä¸åœã€‚
    å›ç¨‹çš„æ™‚å€™é‚„ä¸‹å¤§é›¨ï¼Œæ­å…¬è»Šå›å»é‚„æ­éŒ¯ç«™ï¼ˆç¦ç¦è¢«å‚³æŸ“ã„Œ......ï¼‰
    ä¸¦æ’è€Œåçš„å…©äººå°æ–¼ä»Šå¤©çš„ä¸€åˆ‡æ„Ÿåˆ°è’è¬¬ä¸”å¥½ç¬‘......é€™æ™‚ä»–å€‘è©²æ€éº¼åšå‘¢ï¼Ÿ


    ï¼ˆè€Œæ½˜æ½˜å°ç¦ç¦èªªï¼šã€Œå’Œå¦³åœ¨ä¸€èµ·æˆ‘å¾ˆæ”¾é¬†ã€è®“ç¦ç¦è¦ºå¾—å¿ƒæš–æš–çš„ã€‚ï¼‰`,
    choices: [
      { text: "è½‰å¿µæƒ³ï¼Œå› ç‚ºä¸€é»å°éŒ¯èª¤æ‰èƒ½è®“å½¼æ­¤çš„é—œä¿‚æ›´ç·Šå¯†", target: "7/21æ½˜æ½˜å»å°ä¸­æ‰¾ç¦ç¦", affection: +5, giveItem: "äº’ç›¸åŒ…å®¹çš„å¿ƒ" },
      { text: "è²¬å‚™å°æ–¹", target: "no_result" , affection: -5}
    ]
  },
  {
    id: "7/21æ½˜æ½˜å»å°ä¸­æ‰¾ç¦ç¦",
    text: () => `æ½˜æ½˜å»å°ä¸­æ‰¾ç¦ç¦ç©ï¼Œç¦ç¦è¦ºå¾—èƒ½åœ¨å°ä¸­è¦‹åˆ°æ½˜æ½˜çš„æ„Ÿè¦ºéå¸¸ä¸å¯æ€è­°ã€‚
    é›–ç„¶é‚£å¤©ä¸‹äº†å¤§é›¨ï¼Œä½†æ˜¯æœ‰æ½˜æ½˜çš„é™ªä¼´ï¼Œè®“é€™ä¸€åˆ‡ä¸è¶³ä¸€æã€‚
    ï¼ˆå°è€ƒé©—ï¼šé‚£å¤©æ™šé¤åƒäº†ä»€éº¼ï¼Ÿï¼‰`,
    choices: [
      { text: "é£ªå®¤å’–å“©", target: "7/30ç¦ç¦å»å°ä¸­æ‰¾æ½˜æ½˜", affection: +5, giveItem: "æ½˜æ½˜çš„å¤§è‚šè‚š" },
      { text: "ç¾æ™¯ç´…æ²¹æŠ„æ‰‹", target: "no_result", affection: -5 },
      { text: "å…¶ä»–", target: "no_result", affection: -2 }
    ]
  },
  {
    id: "7/30ç¦ç¦å»å°ä¸­æ‰¾æ½˜æ½˜",
    text: () => `ç¦ç¦ä¸€å¤§æ—©å‡ºç™¼æ™‚å°ä¸­é‚„ä¸‹äº†å¤§é›¨ï¼Œæ‰€å¹¸é«˜éµéäº†è‹—æ —å¾Œå°±æ˜¯å¥½å¤©æ°£äº†ã€‚
    æ½˜æ½˜åœ¨æ–°ç«¹é«˜éµç«™ç­‰ç¦ç¦å‡ºä¾†è®“ç¦ç¦éå¸¸é«˜èˆˆã€‚
    æ½˜æ½˜ä¸€å¤§æ—©å…ˆç¦ç¦å¸¶å»åƒäº†ç²‰æ¼¿è›‹é¤…ï¼Œå»ç«¹ä¸­ï¼Œèµ°äº†ä¸€å°æ®µåå…«å°–å±±ï¼Œä¸‹åˆæ˜¯æ¸…äº¤æ ¡åœ’éŠè¦½ï¼Œèµ°äº†è¶…ç´šå¤šè·¯ã€‚
    å‚æ™šå»äº†æ–°æœˆæ²™ç˜çœ‹å¤•é™½ï¼Œé‚„ä¸€èµ·è·³äº†ä¸€éš»èˆã€‚
    ç¦ç¦æè­°æƒ³è¦åœ¨æµ·é‚Šå’Œæ½˜æ½˜å…±èˆï¼Œæ½˜æ½˜è©²å¦‚ä½•å›æ‡‰å‘¢ï¼Ÿ`,
    choices: [
      { text: "ç«‹åˆ»èªªå¥½å•Šï¼Œé‚£æˆ‘å€‘ä¾†ç·´ç¿’ï¼ï¼", target: "ç…™ç«", affection: +5, giveItem: "ç¦ç¦ç¬¬ä¸€æ¬¡éŠæ–°ç«¹çš„ç¶“é©—" },
      { text: "æ‹’çµ•å¥¹ï¼Œè¦ºå¾—å¾ˆç„¡èŠ", target: "no_result", affection: -5}
    ]
  },
  {
    id: "ç…™ç«",
    text: () => `é€™å…©æ¬¡åŸæœ¬éƒ½è¦å»çœ‹ç…™ç«ï¼Œä½†æ˜¯å› ç‚ºå¤ªé ã€å¤ªå¤šäººäº†å¾Œä¾†åˆ†åˆ¥æ”¹å»è¯å±±çœ‹é¬¼æ»…çš„å±•è¦½ï¼ˆæ‰“ç®—è¦æŠ½å¡ä½†å¤ªå¤šäººäº†æ‰€ä»¥æ“‡æ—¥ä¾†...ä¹Ÿå› æ­¤æ‰èƒ½æ‰­åˆ°æ™‚é€çš„æ‰­è›‹ã€‚ï¼‰å’Œåƒå£½å–œç‡’ã€‚
    ï¼ˆå°è€ƒé©—ï¼šç¦ç¦é‚„æ˜¯éå¸¸æƒ³å»çœ‹ç…™ç«ï¼Œé€™æ™‚æ½˜æ½˜èªªä»€éº¼æ¯”è¼ƒå¥½ï¼Ÿï¼‰`,
    choices: [
      { text: "æˆ‘å€‘æ˜å¹´å†ä¸€èµ·å»çœ‹ï¼ï¼", target: "ç¦ç¦å®¿èˆ" ,giveItem: "è‡‰åœ“åœ“", affection: +5},
      { text: "æ²’çœ‹åˆ°å°±ç®—äº†ï¼Œé‚£åˆæ²’ä»€éº¼", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "ç¦ç¦å®¿èˆ",
    text: () => `ç¦ç¦è²·äº†ä¸€éš»ikeaé¯Šé¯Šè¦é€çµ¦æ½˜æ½˜ï¼Œå»ç¦ç¦å®¿èˆæ™‚ä¿®æ¤…å­çš„é˜¿ä¼¯çªç„¶é€²ä¾†ï¼Œæ­¤æ™‚æ½˜æ½˜è©²èº²åˆ°å“ªè£¡å‘¢ï¼Ÿ`,
    choices: [
      { text: "èº²é€²å»æ‰€", target: "å±æ©Ÿ", affection: +5, giveItem: "è»Ÿè»Ÿçš„å°æ½˜æ½˜" },
      { text: "èº²é€²ç¦ç¦çš„å…§è¡£è£¡é¢", target: "no_result", affection: 0 }
    ]
  },
  {
    id: "å±æ©Ÿ",
    text: () => `æ½˜æ½˜å› ç‚ºå®¿ç‡Ÿçš„äº‹æƒ…å¤ªå¿™ã€å¿½ç•¥äº†ç¦ç¦æ„Ÿå—ï¼Œè®“ç¦ç¦å¾ˆé›£éã€‚
    æ½˜æ½˜è©²æ€éº¼åšå‘¢ï¼Ÿ`,
    choices: [
      { text: "ä¸»å‹•é“æ­‰ï¼Œä¸¦é—œå¿ƒç¦ç¦çš„æ„Ÿå—", target: "å…©äººæœ‰å²ä»¥ä¾†æœ€å¤§çˆ­åµ", affection: +5 },
      { text: "ç›´æ¥ä¸ç†å¥¹ï¼Œå¿™è‡ªå·±çš„äº‹", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "å…©äººæœ‰å²ä»¥ä¾†æœ€å¤§çˆ­åµ",
    text: () => `æœ¬è©²æ˜¯é–‹é–‹å¿ƒå¿ƒçµ‚æ–¼å®Œæˆé¬¼æ»…æŠ½å¡çš„ç´„å®šï¼Œç‚ºä½•æœƒç”¢ç”Ÿè£‚ç¸«å‘¢ï¼Ÿ
    å…©äººè¦å¦‚ä½•é¢å°é€™ä»¶äº‹å‘¢ï¼Ÿ`,
    choices: [
      { text: "å‘Šè¨´å°æ–¹è‡ªå·±çš„æ„Ÿå—ï¼ŒæŠŠèª¤æœƒè§£é–‹ï¼Œæ“æŠ±å’Œå¥½", target: "å’Œå¥½",giveItem: "æ›´æ·±çš„ç†è§£", affection: +5},
      { text: "è®“ç¦ç¦è‡ªå·±åœ¨é‚£é‚Šå“­ï¼Œä¸ç®¡å¥¹", target: "no_result", affection: -5
      }
    ]
  },
  {
    id: "å’Œå¥½",
    text: () => `å»æ²³å²¸é¨è…³è¸è»Šã€‚è²·å…¬é¤¨çš„é¹¹æ°´é›å›æ½˜æ½˜å®¿èˆåƒï¼Œæ½˜æ½˜é‚„åˆ‡äº†èŠ­æ¨‚çµ¦ç¦ç¦ã€‚
    ç¦ç¦æƒ³è®“æ½˜æ½˜èå¥¹çš„è‡­è…³ä¸«ï¼Œæ½˜æ½˜è©²æ€éº¼åšå‘¢ï¼Ÿ`,
    choices: [
      { text: "å¤§å¸ä¸€å£ï¼Œå‘Šè¨´å¥¹è‡ªå·±å¾ˆå–œæ­¡è", target: "æ½˜æ½˜åœ¨å°åŒ—åšç¦ç¦çš„ç”Ÿæ—¥å¡ç‰‡", affection: +5, giveItem: "ç¦ç¦çš„è‡­è¥ªå­" },
      { text: "æ‹’çµ•å¥¹ï¼Œè¦ºå¾—å¾ˆå™å¿ƒ", target: "no_result", affection: -5 }
     
    ]
  },
  {
    id: "æ½˜æ½˜åœ¨å°åŒ—åšç¦ç¦çš„ç”Ÿæ—¥å¡ç‰‡",
    text: () => `æ½˜æ½˜ç¨è‡ªåœ¨å°åŒ—åšç¦ç¦çš„å¡ç‰‡ä¸­.........å¾ˆæƒ³ç¦ç¦ã€‚
    é€™æ™‚ï¼Œç¦ç¦è©²æ€éº¼åšå‘¢ï¼Ÿ`,
    choices: [
      { text: "æ„Ÿè¬æ½˜æ½˜ï¼Œå‘Šè¨´ä»–è‡ªå·±å¾ˆå–œæ­¡é€™ä»½å¿ƒæ„", target: "ç¦ç¦çš„21æ­²ç”Ÿæ—¥",giveItem: "æ½˜æ½˜æ›´å¤šçš„æ„›", affection: +5 },
      { text: "ä¸ç”¨è¦ºå¾—æ€æ¨£ï¼Œè¦ºå¾—æ˜¯ä»–æ‡‰è©²åšçš„", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "ç¦ç¦çš„21æ­²ç”Ÿæ—¥",
    text: () => `æ½˜æ½˜å¸¶ç¦ç¦å»ä¿¡ç¾©åƒç”Ÿæ—¥é¤ï¼Œæ½˜æ½˜ä¸€è·¯ä¸Šé¬¼é¬¼ç¥Ÿç¥Ÿçš„ä¸çŸ¥é“åœ¨æ©é£¾ä»€éº¼.......
    åŸä¾†æ˜¯èŠ±ï¼ï¼é‚„æ˜¯ç¦ç¦æœ€æ„›çš„è—è‰²ï¼Œç¦ç¦çœ‹äº†æ½˜æ½˜å¾ˆç”¨å¿ƒåšçš„å¡ç‰‡æ›¸ï¼Œæ„Ÿå‹•äº†è½æ·šã€‚
    åƒé£½é£¯æ™ƒæ™ƒä¸€èµ·å»å–é…’ï¼Œå–é†‰çš„æ½˜æ½˜çœŸå¯æ„›ã„šï¼Œè¶…ç´šé»äººã€‚
    çœ‹åˆ°å–é†‰çš„æ½˜æ½˜ï¼Œç¦ç¦è¦æ€éº¼è¾¦å‘¢ï¼Ÿ`,
    choices: [
      { text: "è¦ªè¦ªã€æ‘¸æ‘¸ç…§é¡§ä»–", target: "å°åŒ—å…©æ—¥éŠ", affection: +5, giveItem: "æ’’å¬Œé»äººçš„æ½˜æ½˜" },
      { text: "ç›´æ¥æŠŠæ½˜æ½˜æ‰“åŒ…å›å®¶ï¼Œä»»ç”±ç¦ç¦æ“ºä½ˆ", target: "no_result", affection: -5 }
    ]
  },
  {
    id: "å°åŒ—å…©æ—¥éŠ",
    text: () => `ä¸€èµ·å»äº†å¤§ä½³æ²³æ¿±å…¬åœ’çœ‹å‘æ—¥è‘µï¼Œå»äº†é£›æ©Ÿå··çœ‹é£›æ©Ÿã€‚
    çµæŸå¾Œå»äº†101æ‹¿ç¦ç¦çš„iphoneã€‚å»é€šåŒ–è¡—åƒäº†å†°ç«æ¹¯åœ“ã€‚
    å›å»æ½˜æ½˜å¹«æ´—å®Œæ¾¡çš„ç¦ç¦å¹é ­é«®ï¼Œä½†æ½˜æ½˜å¾ˆä¸æœƒå¹ï¼Œè®“ç¦ç¦çœ‹ä¸ä¸‹å»æ‰“ç®—è‡ªå·±å¹ã€‚
    é€™æ™‚å€™æ½˜æ½˜è©²æ€éº¼åšå‘¢ï¼Ÿ
`,
    choices: [
      { text: "è«‹ç¦ç¦è€å¿ƒçš„æ•™ï¼Œå¹«å¥¹å¹ä¹¾", target: "ç„¦æ…®çš„ç¦ç¦", giveItem: "è·Ÿç¦ç¦ä¸€èµ·ç¡è¦º", affection: +5 },
      { text: "ä¸Ÿçµ¦å¥¹ï¼Œé€™å¥³äººæ—¢ç„¶é€™éº¼æœƒå°±è®“å¥¹è‡ªå·±ä¾†", target: "no_result", affection: -5 }
    ]
  },{
    id: "ç„¦æ…®çš„ç¦ç¦",
    text: () => `ä¸çŸ¥é“è©²å›å®¶é‚„æ˜¯ç•™åœ¨å°åŒ—è·Ÿæ½˜æ½˜å»åœ“å±±çœ‹é£›æ©Ÿçš„ç¦ç¦éå¸¸ç„¦æ…®ï¼Œåœ¨é‚£é‚Šé¬§è„¾æ°£ã€‚
    æ½˜æ½˜è©²æ€éº¼åšå‘¢ï¼Ÿ
`,
    choices: [
      { text: "è€å¿ƒçš„å“„ç¦ç¦ï¼Œä¸€èµ·æƒ³è§£æ±ºè¾¦æ³•", target: "åœ“å±±çœ‹é£›æ©Ÿ",giveItem: "ç¦ç¦å¹¸ç¦çš„çœ¼æ·š", affection: +5 },
      { text: "é€™å¥³äººå¤ªç…©ï¼Œç›´æ¥ä¸ç†", target: "no_result", affection: -5 }
    ]
    },
    {
    id: "åœ“å±±çœ‹é£›æ©Ÿ",
    text: () => `åœ¨å¤§è‰çš®ä¸Šå…©å€‹äººåƒè›‹ç³•ç‚ºå½¼æ­¤æ…¶ç”Ÿï¼Œé›–ç„¶é¢¨å¾ˆå¤§æœ‰é»æƒèˆˆï¼Œä½†èƒ½å’Œæ½˜æ½˜ç›¸è™•ï¼Œç¦ç¦éƒ½æœƒæ„Ÿåˆ°å……æ»¿åŠ›é‡ã€‚
    èººåœ¨è‰åœ°ä¸Šï¼Œç ”ç©¶è‘—é ­ä¸Šä¸€æ¶é£›éä¸€æ¶çš„é£›æ©Ÿå‹è™Ÿã€‚
    é€™æ™‚ï¼Œç¦ç¦å¿ä¸ä½å•æ½˜æ½˜ï¼šä½ å¯ä»¥è·Ÿæˆ‘é‚£å€‹å—ï¼Ÿ

`,
    choices: [
      { text: "ç­”æ‡‰å¥¹ï¼Œæ»¿è¶³å¥¹", target: "be continued", affection: +5, giveItem: "é›£å¿˜çš„ç¶“é©—" },
      { text: "æ‹’çµ•å¥¹ï¼Œè£ä½œä¸çŸ¥é“", target: "no_result", affection: -5 }
    ]
    },

  /* çµå±€å ´æ™¯ */
  {
    id: "be continued",
    text: () => `æº«æš–çš„æ™šä¸Šã€‚ç¦ç¦èˆ‡æ½˜æ½˜æ¡ç·Šå½¼æ­¤çš„æ‰‹ã€‚ä½ å€‘çš„é—œä¿‚æ›´ç©©å®šäº†ã€‚
    å…©äººçš„æ•…äº‹æœªå®Œå¾…çºŒ...`,
    choices: [
      { text: "é‡æ–°é–‹å§‹", target: "start" },
      { text: "é›¢é–‹éŠæˆ²", target: "quit" }
    ]
  },
  {
    id: "no_result",
    text: () => `çµå±€ï¼šå¸¶è‘—ä¸€é»éºæ†¾ã€‚é‚„éœ€è¦æ™‚é–“ã€‚ä¹Ÿè¨±æœªä¾†æœƒæ›´å¥½ã€‚`,
    choices: [
      { text: "é‡æ–°é–‹å§‹", target: "start" },
      { text: "é›¢é–‹éŠæˆ²", target: "quit" }
    ]
  },
  {

  },
  {
    
  },
  {
    id: "quit",
    text: () => `éŠæˆ²çµæŸï½`,
    choices: [
      { text: "é‡æ–°é–‹å§‹", target: "start" }
    ]
  }
];

/* ===== å¼•æ“ç¨‹å¼ï¼ˆä¸‹æ–¹ä¸€èˆ¬ä¸éœ€ä¿®æ”¹ï¼Œè‹¥è¦æ“´å……å¯é–±è®€è¨»è§£ï¼‰ ===== */

function findScene(id){
  return scenes.find(s => s.id === id);
}

function render(){
  const scene = findScene(state.current);
  const sceneTextEl = document.getElementById("scene-text");
  const choicesEl = document.getElementById("choices");
  const invEl = document.getElementById("inventory");
  const affEl = document.getElementById("stat-affection");
  const sceneStatEl = document.getElementById("stat-scene");

  // æ›´æ–°æ¨™é ­èˆ‡æ•¸å€¼
  affEl.textContent = `å¥½æ„Ÿåº¦: ${state.affection}`;
  sceneStatEl.textContent = `å ´æ™¯: ${scene.title || scene.id}`;

  // æ–‡å­—å¯ä»¥æ˜¯å­—ä¸²æˆ–å‡½æ•¸ï¼ˆä¾¿æ–¼æ’å…¥å‹•æ…‹åå­—ï¼‰
  const text = typeof scene.text === "function" ? scene.text() : scene.text;
  // æ›è¡Œæ”¯æ´
  sceneTextEl.innerHTML = text.split("\n").map(l => `<div>${escapeHtml(l)}</div>`).join("");

  // é¸é …
  choicesEl.innerHTML = "";
  scene.choices.forEach((c, idx) => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.innerHTML = `${escapeHtml(c.text)}`;
    btn.addEventListener("click", () => choose(c));
    // å¦‚æœé¸é …æœ‰ requireItemï¼Œæª¢æŸ¥æ˜¯å¦æ“æœ‰ï¼Œå¦å‰‡ç¦ç”¨
    if(c.requireItem && !state.inventory.includes(c.requireItem)){
      btn.disabled = true;
      btn.style.opacity = 0.5;
      btn.title = `éœ€è¦é“å…·ï¼š${c.requireItem}`;
    }
    choicesEl.appendChild(btn);
  });

  // èƒŒåŒ…æ¸²æŸ“
  invEl.innerHTML = "";
  if(state.inventory.length === 0){
    invEl.innerHTML = `<div class="muted">ç©º</div>`;
  } else {
    state.inventory.forEach(it => {
      const d = document.createElement("div");
      d.className = "inv-item";
      d.textContent = it;
      invEl.appendChild(d);
    });
  }

  // ç„¦é»åˆ°æ–‡å­—å€
  sceneTextEl.focus();
}

// è™•ç†é¸é …
function choose(choice){
  // è™•ç†å¥½æ„Ÿ
  if(typeof choice.affection === "number"){
    state.affection = clamp(state.affection + choice.affection, 0, 100);
  }
  // çµ¦é“å…·
  if(choice.giveItem){
    if(!state.inventory.includes(choice.giveItem)) state.inventory.push(choice.giveItem);
  }
  // ç§»é™¤é“å…·ï¼ˆå¯æ“´å……ï¼‰
  if(choice.removeItem){
    const i = state.inventory.indexOf(choice.removeItem);
    if(i >= 0) state.inventory.splice(i,1);
  }

  // æ”¹è®Šå ´æ™¯
  if(choice.target){
    // å¦‚æœ target æ˜¯ "start"ï¼ˆé‡æ–°é–‹å§‹ï¼‰å°±é‡è¨­ç‹€æ…‹ï¼ˆä½†ä¿ç•™åå­—ï¼‰
    if(choice.target === "start"){
      state.current = "start";
      state.affection = 0;
      state.inventory = [];
    } else {
      state.current = choice.target;
    }
  }
  render();
}

/* ===== å­˜æª” / è®€æª” ===== */
const SAVE_KEY = "textadventure_save_v1";

function saveGame(){
  const data = {
    current: state.current,
    affection: state.affection,
    inventory: state.inventory,
    playerName, boyfriendName
  };
  localStorage.setItem(SAVE_KEY, JSON.stringify(data));
  alert("å·²å„²å­˜éŠæˆ²ã€‚");
}

function loadGame(){
  const raw = localStorage.getItem(SAVE_KEY);
  if(!raw){ alert("æ‰¾ä¸åˆ°å­˜æª”ã€‚"); return; }
  try{
    const d = JSON.parse(raw);
    state.current = d.current || "start";
    state.affection = typeof d.affection === "number" ? d.affection : 0;
    state.inventory = Array.isArray(d.inventory) ? d.inventory : [];
    if(d.playerName) playerName = d.playerName;
    if(d.boyfriendName) boyfriendName = d.boyfriendName;

    // æ›´æ–°è¼¸å…¥æ¬„ä½é¡¯ç¤º
    document.getElementById("playerNameInput").value = playerName;
    document.getElementById("boyfriendNameInput").value = boyfriendName;

    render();
    alert("å·²è¼‰å…¥å­˜æª”ã€‚");
  }catch(e){
    console.error(e);
    alert("è¼‰å…¥å¤±æ•—ï¼Œè³‡æ–™æ ¼å¼æœ‰èª¤ã€‚");
  }
}

/* ===== UI æ§åˆ¶ç¶å®š ===== */
document.getElementById("saveBtn").addEventListener("click", saveGame);
document.getElementById("loadBtn").addEventListener("click", loadGame);
document.getElementById("restartBtn").addEventListener("click", () => {
  if(confirm("ç¢ºå®šè¦é‡æ–°é–‹å§‹å—ï¼Ÿï¼ˆæœƒé‡ç½®å¥½æ„Ÿåº¦èˆ‡æ”¶ç©«ï¼‰")){
    state.current = "start";
    state.affection = 0;
    state.inventory = [];
    // æ›´æ–°è¼¸å…¥æ¬„ä½åå­—ç‚ºé è¨­ï¼ˆä¸å¼·åˆ¶ï¼‰
    render();
  }
});
document.getElementById("applyNames").addEventListener("click", () => {
  const p = document.getElementById("playerNameInput").value.trim();
  const b = document.getElementById("boyfriendNameInput").value.trim();
  if(p) playerName = p;
  if(b) boyfriendName = b;
  alert("å·²å¥—ç”¨åç¨±ã€‚è‹¥è¦å¾é ­é–‹å§‹ï¼Œè«‹æŒ‰ã€Œé‡æ–°é–‹å§‹ã€ã€‚");
  render();
});

/* ===== å°å·¥å…·å‡½æ•¸ ===== */
function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }
function escapeHtml(str){
  return str.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m];});
}

/* ===== åˆå§‹åŒ– UI å€¼ ===== */
// å°‡è¼¸å…¥æ¬„ä½é å¡«åå­—ï¼ˆå¯æ”¹ï¼‰
document.getElementById("playerNameInput").value = playerName;
document.getElementById("boyfriendNameInput").value = boyfriendName;

// é–‹å§‹æ¸²æŸ“
render();

/* ===== å¯é¸ï¼šåœ¨ä¸åŒå¥½æ„Ÿåº¦ä¸‹è§¸ç™¼äº‹ä»¶æˆ–åˆ†æ”¯
   è‹¥è¦é™åˆ¶é¸é …å‡ºç¾ï¼Œå¯ä»¥åœ¨ scenes è£¡çš„ choice åŠ ä¸Š requireAffection æˆ– requireItem
   ç¨‹å¼å·²ç¤ºç¯„ requireItem æª¢æŸ¥ï¼ˆåœ¨ render ä¸­ï¼‰ï¼›ä½ ä¹Ÿå¯ä»¥æ“´å…… choose èˆ‡ render åŠ ä¸Šæ›´å¤šæ¢ä»¶ã€‚
*/
</script>
<script>
// ===== ç”Ÿå‹•å¡ç‰‡è§£é–åŠŸèƒ½ =====
function rogersEncode(str){
  const morse = {
    'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.','H':'....',
    'I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.','O':'---','P':'.--.',
    'Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-','V':'...-','W':'.--','X':'-..-',
    'Y':'-.--','Z':'--..','&':'.-...', ' ':'/'
  };
  return str.toUpperCase().split('').map(c => morse[c] || '').join(' ');
}

const cardContent = `Dear Panï¼š 

<p>ç”Ÿæ—¥å¿«æ¨‚ã€‚</p>
<p>æ·±å¤œè£¡æ™‚å¸¸å›æƒ³èµ·æˆ‘èˆ‡ä½ çš„é€™æ®µç·£åˆ†ä»ç„¶å€æ„Ÿå¥‡å¦™ï¼ŒåŸæœ¬å…«æ¡¿å­æ‰“ä¸è‘—çš„äººå»èµ°åœ¨äº†ä¸€èµ·ã€‚çŒ¶è¨˜ç¬¬ä¸€æ¬¡è¦‹é¢ä½ ç¾æ¾€çš„ç¬‘å®¹ï¼Œæˆ‘ç¬¬ä¸€çœ¼å°±è¦ºå¾—æˆ‘æœƒå¾ˆå–œæ­¡ä½ ã€‚ä½ å”±çš„ã€Šæ™šå®‰ã€‹æˆ‘è½äº†ç„¡æ•¸éï¼Œå¸Œæœ›æˆ‘èƒ½ä¸€ç›´æ“æœ‰ä½ çš„æ™šå®‰ã€‚ç•¶æ™‚å¤ªæ€•å—å‚·çš„æˆ‘åœ¨ä½ èªªè¦ç·©ç·©æ™‚é€€ç¸®äº†ï¼Œä½†é‚„å¥½æˆ‘é¼“èµ·å‹‡æ°£å°ä½ è¨´èªªæˆ‘çš„æƒ³æ³•ï¼Œè®“æˆ‘å€‘æ‰æœ‰æ©Ÿæœƒç¹¼çºŒä¸‹å»ï¼Œä¹Ÿè¬è¬ä½ ï¼Œåœ¨é‚£å€‹æ™šä¸Šè®“æˆ‘å€‘æŠŠèª¤æœƒè§£é–‹ã€‚æˆ‘ä¸æœƒå¿˜è¨˜æˆ‘å€‘ä¸€èµ·æ¼«æ­¥åœ¨æ ¡åœ’è£¡ç‰½è‘—æ‰‹ç”©å•Šç”©ï¼Œé‚Šå”±æ­Œçš„æ™‚å€™ï¼Œé‚£æ˜¯æˆ‘æœ€çè²´çš„å›æ†¶ä¹‹ä¸€ã€‚ä¹Ÿä¸æœƒå¿˜è¨˜æˆ‘å€‘å…©å€‹ä¾ååœ¨ä½ å®¿èˆåºŠä¸Šè¬›ç›¡æˆ‘å€‘æ‰€æœ‰éå¾€ã€‚é‚„æœ‰ä½ åƒå†°çš„æ¨¡æ¨£ï¼Œä½ èªªå…©é¡†çç å’Œä»™è‰åƒä¸€å¼µè‡‰ï¼Œæˆ‘æ¨å¾—åƒå®ƒå—ï¼Ÿé‚£æ™‚å€™çš„æˆ‘è¦ºå¾—ä½ å¥½æœ‰è¶£ï¼Œåœ¨é€™éº¼å°çš„äº‹æƒ…ä¹Ÿèƒ½ç™¼ç¾å…¶ä¸­çš„æ¨‚è¶£ï¼Œä¹Ÿå¾ˆç¾¨æ…•ä½ ï¼Œå–®ç´”ã€ç«¥å¿ƒæœªæ³¯ã€‚ä½ å•éæˆ‘æˆ‘ç‚ºä»€éº¼å¾ˆå¤šå°äº‹ä¹Ÿè¦æ‹ç…§è¨˜éŒ„ï¼Ÿå› ç‚ºæˆ‘è¦ºå¾—æˆ‘å¥½åƒä¸€ç›´åœ¨å¿˜è¨˜æŸäº›äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘æƒ³è¦æŠŠå’Œä½ ç›¸è™•çš„æ¯ä¸€åˆ»éƒ½ç›¡æˆ‘æ‰€èƒ½çš„è¨˜éŒ„ä¸‹ä¾†ã€‚
</p>
<p>
æˆ‘çœŸçš„å¾ˆé›£è¨´èªªæˆ‘å°ä½ çš„æƒ…æ„Ÿï¼Œä¸æ“…è¨€è©ï¼Œå¥½åƒåªèƒ½ä¸€ç›´ç”¨ã€Œæˆ‘å¥½å–œæ­¡ä½ ã€ä¾†è¡¨é”ã€‚ä½†ç•¶æˆ‘æ„Ÿåˆ°å¾ˆå¹¸ç¦ä»¥è‡³è½æ·šæ™‚ï¼Œå¿ƒè£¡ç¸½æƒ³è‘—æˆ‘æ€éº¼èƒ½æ“æœ‰ä½ é€™éº¼å¥½çš„äººã€‚ä½ æ˜¯çˆ¶æ¯çš„å¥½å…’å­ã€æ‰‹è¶³é–“çš„å¥½å“¥å“¥ã€æœ‹å‹ä¸­çš„ç›Šå‹ã€å¸«é•·ç¨±è¨±çš„å¥½å­¸ç”Ÿã€‚ä½ å°æˆ‘ä¾†èªªç•¶ç„¶ä¹Ÿæ˜¯ä¸€å€‹å¥½ä¼´ä¾¶ã€å¥½æœ‹å‹ã€‚ä½ çš„å­˜åœ¨å½±éŸ¿æˆ‘å¾ˆå¤šï¼Œå› ç‚ºä½ ï¼Œæˆ‘å¥½åƒèƒ½æ›´æ­£å‘ä¸”ç©æ¥µçš„å»åšå¥½ä¸€ä»¶äº‹ï¼Œæƒ³è¦æ›´åŠªåŠ›çš„å¾€ä¸Šçˆ¬ã€‚å¦‚æœèƒ½ä¸€ç›´å’Œä½ ç›¸ä¼´ç›¸éš¨ï¼Œæˆ‘å°±èƒ½æ›´å …å®šå»åšå¥½ä»»ä½•äº‹ã€‚é€™å€‹ä¸–ç•Œå¸¶çµ¦æˆ‘çš„ç—›è‹¦å¾ˆå¤šï¼Œä½†ä½ ä¸€å®šæ˜¯ä¸Šå¤©è¡¨æšæˆ‘è·¨è¶Šé‡é‡é›£é—œçš„å¥‡è¹Ÿç³–æœï¼Œä½ å°±å¥½åƒæˆ‘çš„æ­¢ç—›è—¥ä¸€æ¨£ï¼Œæœ‰ä½ åœ¨èº«é‚Šï¼Œå¾ˆå¤šç—›æ¥šéƒ½é¡¯å¾—å¾®ä¸è¶³é“ã€‚è¬è¬ä½ ï¼Œåœ¨æˆ‘æƒ…ç·’æ•æ„Ÿæ™‚é‚„æ˜¯è€å¿ƒçš„å®‰æ…°æˆ‘ã€é¼“å‹µæˆ‘ã€‚åœ¨æˆ‘é¬§è„¾æ°£çš„æ™‚å€™ä¹Ÿä¸å­å…¶ç…©çš„å“„æˆ‘ã€‚è¬è¬ä½ åƒç¦®ç‰©ä¸€æ¨£å‡ºç¾åœ¨æˆ‘çš„ç”Ÿå‘½è£¡ã€‚è¬è¬ä½ åƒå¤ªé™½ä¸€æ¨£ç…§äº®æˆ‘çš„ä¸–ç•Œã€‚åŸä¾†æ„›æ˜¯å½¼æ­¤ç…§äº®ï¼Œäº’ç›¸æˆé•·ã€‚
</p>
<p>
äººé–“æœ¬è©²ä¸ä»¤æˆ‘é€™éº¼é©šå–œçš„ï¼Œä½†æ˜¯ä½ ä¾†äº†ã€‚
</p>
<p>
æ…šæ„§çš„æ˜¯ï¼Œåœ¨æˆ‘ç”Ÿæ—¥ä¹‹å‰æˆ‘ä¸€ç›´èªç‚ºä½ ä¸¦æ²’æœ‰å¤šå–œæ­¡æˆ‘ï¼Œæˆ‘å¸¸å¸¸æƒ³å¾ˆå¤šï¼Œç¸½è©¦æƒ³è‘—äº‹æƒ…æœ€ç³Ÿç³•çš„æƒ…æ³ï¼Œè©¦åœ–è®“è‡ªå·±æŠŠä¸€æ®µé—œä¿‚çœ‹å¾—æ·¡ä¸€é»ï¼Œä¹Ÿè¨±å°±èƒ½éš¨æ™‚æŠ½èº«ã€‚å› ç‚ºå¹¸ç¦ç¸½æ˜¯ç¨ç¸±è€Œé€ã€è€Œæˆ‘å¤ªå®³æ€•å—å‚·ã€‚æ„›æƒ…ä¸åƒè¦ªæƒ…æœ‰å¤©ç”Ÿçš„ç´å¸¶ï¼Œåªæ†‘é è‘—å…©å€‹äººä¸€å¯¸ä¸€å¯¸çš„ç”¨å¿ƒå»ºç«‹çš„ã€‚æ‰€ä»¥è«‹åŸè«’æˆ‘å¶çˆ¾æœƒå•ä½ å–œä¸å–œæ­¡æˆ‘ï¼Œæˆ‘éœ€è¦åè¦†ç¢ºèªä½ å°æˆ‘çš„æƒ…æ„Ÿæ‰èƒ½å¤ å®‰å¿ƒã€‚ä½†ç•¶æˆ‘å¾—çŸ¥ä½ å¦‚æ­¤ç”¨å¿ƒçš„è£½ä½œæˆ‘çš„ç”Ÿæ—¥å¡ç‰‡æ™‚ï¼Œé€™äº›æ“”æ†‚å¥½åƒç…™æ¶ˆé›²æ•£äº†ï¼Œå¾ä¾†æ²’æœ‰äººå¦‚æ­¤å°æˆ‘ï¼Œæˆ‘çœŸçš„çœŸçš„å¾ˆæ„Ÿæ¿€ã€‚é‚„æœ‰ä¸Šå€‹ç¦®æ‹œä¸€ï¼Œé¢±é¢¨å¤œé‚£æ™šï¼Œä½ å†’è‘—é¢¨é›¨ä¾†æ‰¾æˆ‘ï¼Œå¾ˆè¬è¬ä½ åœ¨æˆ‘éœ€è¦ä½ çš„æ™‚å€™å‡ºç¾åœ¨æˆ‘èº«é‚Šã€‚å°æˆ‘è€Œè¨€ï¼Œè¦èªªå‡ºã€Œæˆ‘å¾ˆéœ€è¦ä½ ã€æ˜¯éå¸¸å›°é›£çš„ï¼Œæˆ‘ç¸½ä¸æƒ³è¢«çœ‹ç©¿è‡ªå·±å…¶å¯¦å¾ˆè„†å¼±ï¼Œä½†åœ¨ä½ é¢å‰ï¼Œæˆ‘èƒ½å¤ å¦ç„¶çš„åšè‡ªå·±ã€‚å…¶å¯¦æ¯å¤©çš„æ¯å¤©ï¼Œéƒ½æœƒå¿ƒç–¼ä½ å¤ªç´¯äº†ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½æœ‰ä¸€å€‹å¥½çš„ç¡çœ ï¼Œå¸Œæœ›æœ‰å¾ˆå¤šå¹¸é‹çš„äº‹é™è‡¨åœ¨ä½ çš„èº«ä¸Šï¼Œå¸Œæœ›ä½ çš„å‰é€”æ˜äº®ï¼Œèƒ½å¤ å»åšä½ å–œæ­¡çš„äº‹ï¼Œå¸Œæœ›ä½ æ¯å¤©éƒ½èƒ½éå¾—å¿«å¿«æ¨‚æ¨‚ã€å¸Œæœ›ä½ å¥åº·å¹³å®‰ã€‚æˆ‘é‚„æƒ³è·Ÿä½ ä¸€èµ·åƒå¥½å¤šå¥½å¤šé “é£¯ï¼Œå»å¥½å¤šå¥½å¤šåœ°æ–¹ç©ï¼Œåœ¨æ¸…æ™¨é®å€‰çš„æµ·é‚Šã€åœ¨å¤§é›ªç´›é£›çš„åŒ—æµ·é“èˆ‡ä½ å†è·³ä¸‹ä¸€æ”¯ã€ä¸‹ä¸‹ä¸€æ”¯èˆã€‚é‚„æƒ³å’Œä½ ç‰½è‘—æ‰‹ã€å“¼è‘—æ­Œåœ¨è‡ºåŒ—é€›éå¸‚å€æ‰€æœ‰è·¯ç‡ˆï¼Œåœ¨å‡Œæ™¨ä¸‰é»çš„ç¸½åœ–å‰çœ‹æ˜Ÿæ˜Ÿã€‚é‚„æœ‰å¥½å¤šå¥½å¤šäº‹æƒ…æƒ³å’Œä½ ä¸€èµ·åšã€‚å’Œä½ åœ¨ä¸€èµ·æ™‚é–“ç¸½æ˜¯éå¾—å¥½å¿«ï¼Œå¥½å¤šå°äº‹å› ç‚ºæœ‰äº†ä½ è®Šå¾—å¥½æœ‰æ„ç¾©ï¼Œæ™‚é–“ç¸½ä¸å¤ ä¾›æˆ‘å’Œä½ ä½¿ç”¨ã€‚ä½ ç¸½èƒ½è®“èƒ½é‡ä½çš„æˆ‘å……é£½é›»ã€‚æˆ‘åœ¨è£½ä½œé€™å€‹codeçš„æ™‚å€™ï¼Œæœ‰éå¸¸å¤šæ„Ÿè§¸ï¼Œæˆ‘å°æ–¼ä½ çš„æ—¥å¸¸çµ‚æ–¼èƒ½å¤ æ„ŸåŒèº«å—ï¼Œé€™æ˜¯ä»¶å¾ˆèŠ±æ™‚é–“çš„äº‹æƒ…ï¼Œä½†ä½ é‚„æ˜¯ç›¡ä½ æ‰€èƒ½çš„æŠ½ç©ºèˆ‡æˆ‘ç›¸è™•ï¼Œæˆ‘çœŸçš„å¾ˆæ„Ÿè¬ã€‚
</p>
<p>å¸Œæœ›å¾€å¾Œçš„ä¹æœˆï¼Œå±¬æ–¼æˆ‘å€‘çš„æœˆä»½ï¼Œæˆ‘å€‘éƒ½å¯ä»¥é™ªåœ¨å½¼æ­¤çš„èº«é‚Šï¼Œä¸€èµ·èµ°ä¸‹å»ã€‚é¡˜ä½ åšæœ€å»£å¤§çš„å¤¢ï¼Œå¤¢è£¡æœ‰ä¸€å€‹å°å°çš„æˆ‘ã€‚æˆ‘è¦ç¹¼çºŒåšä½ çš„èª¿çš®æ—è›‹è‡­å¯¶ç¦ç¦ï¼ï¼</p>
<P>æˆ‘æ„›ä½ ã€‚</P>
<P>è¨€ä¸ç›¡æ–¼æ­¤ï¼Œå‰©ä¸‹çš„å°±è®“æˆ‘åœ¨æ¥ä¸‹ä¾†çš„æ—¥å­ç¹¼çºŒèªªçµ¦ä½ è½ã€‚</P>

<p>2025.9.30 ä¿ç¦</p>
`;
function createCardModal(){
  if(document.getElementById("cardModal")) return; // é˜²é‡è¤‡

  // å»ºç«‹æµ®çª—å®¹å™¨
  const modal = document.createElement("div");
  modal.id = "cardModal";
  modal.style.position = "fixed";
  modal.style.top = 0;
  modal.style.left = 0;
  modal.style.width = "100%";
  modal.style.height = "100%";
  modal.style.background = "rgba(0,0,0,0.7)";
  modal.style.display = "flex";
  modal.style.alignItems = "center";
  modal.style.justifyContent = "center";
  modal.style.zIndex = 9999;
  modal.style.animation = "fadeIn 0.5s";

  // å¡ç‰‡æœ¬é«”
  const card = document.createElement("div");
  card.style.background = "#0b1220";
  card.style.padding = "20px";
  card.style.borderRadius = "12px";
  card.style.width = "1200px";
  card.style.textAlign = "center";
  card.style.color = "#e6eef3";
  card.style.boxShadow = "0 10px 30px rgba(0,0,0,0.6)";
  card.style.animation = "scaleUp 0.5s";
  card.style.fontFamily = "PingFang TC"; // æ›å­—é«”
card.style.fontSize   = "15px";              // ç¸®å°æ•´é«”æ–‡å­—
    card.style.lineHeight = "1.5";              // å¢åŠ è¡Œè·

  const title = document.createElement("h2");
  title.textContent = "ğŸ’Œ å¡ç‰‡è§£é– ğŸ’Œ";
  card.appendChild(title);

  const info = document.createElement("p");
  const morseCode = rogersEncode("pan&zhen");
  info.innerHTML = `è«‹è¼¸å…¥å¯†ç¢¼è§£é–å¡ç‰‡ï¼š<br><small>${morseCode}</small>`;
  card.appendChild(info);

  const input = document.createElement("input");
  input.style.width = "80%";
  input.style.padding = "8px";
  input.style.marginTop = "10px";
  input.style.borderRadius = "6px";
  input.style.border = "1px solid #9ad3bc";
  input.style.background = "#0f1724";
  input.style.color = "#e6eef3";
  card.appendChild(input);

  const btn = document.createElement("button");
  btn.textContent = "è§£é–å¡ç‰‡";
  btn.className = "btn";
  btn.style.marginTop = "12px";
  btn.onclick = () => {
    if(input.value.toLowerCase() === "pan&zhen"){
      card.innerHTML = `<h2>ğŸ‚</h2><p>${cardContent}</p>`;
      btn.textContent = "é—œé–‰";
      btn.onclick = () => document.body.removeChild(modal);
    } else {
      alert("å¯†ç¢¼éŒ¯èª¤ï¼Œå†è©¦çœ‹çœ‹å§ï½");
    }
  };


  card.appendChild(btn);

  modal.appendChild(card);
  document.body.appendChild(modal);
}


// æ–°å¢å‹•ç•«
const style = document.createElement("style");
style.textContent = `
@keyframes fadeIn { from {opacity:0} to {opacity:1} }
@keyframes scaleUp { from {transform: scale(0.5)} to {transform: scale(1)} }
`;
document.head.appendChild(style);

// æª¢æŸ¥å¥½æ„Ÿåº¦
function checkAffectionForCard(){
  if(state.affection >= 100){
    createCardModal();
  }
}

// è¦†å¯« renderï¼Œä¿æŒåŸæœ‰åŠŸèƒ½
const originalRender = render;
render = function(){
  originalRender();
  checkAffectionForCard();


};
// åˆå§‹åŒ–æª¢æŸ¥
checkAffectionForCard();
</script>

</body>
</html>